---
title: 红黑树
toc: true
date: 2020-12-16 13:14:54
tags:
categories:
---

<!--more-->

## 缺页中断

先看什么时候要用到红黑树。

对于用户空间的缺页中断，首先从CPU的控制寄存器CR2中读出出错地址address，然后调用find_vma(),在进程的虚拟地址空间中找出结束地址大于address的第一个区间。

这个查找是一个频繁操作，为了加速VMA的检索速度，所以有了红黑树。

根据查找的结果，如果找不到，说明中断是地址越界引起的，转到bad_area执行相关错误处理。如果找到，对页面检查权限，通过后进行页面的分配和交换。

这个查找是针对整个内存还是进程的？？如果是进程的一个进程一棵树？

